export const runtime = 'nodejs';
import { NextRequest,NextResponse } from 'next/server';import { db } from '@/db/client';import { lessons } from '@/db/schema';import { eq } from 'drizzle-orm';export async function GET(_:NextRequest,{params}:{params:{moduleId:string}}){const rows=await db.select().from(lessons).where(eq(lessons.moduleId,params.moduleId));return NextResponse.json(rows);}export async function POST(req:NextRequest,{params}:{params:{moduleId:string}}){const b=await req.json();const row=await db.insert(lessons).values({moduleId:params.moduleId,title:b.title,description:b.description??null,videoUrl:b.videoUrl??null,attachmentUrl:b.attachmentUrl??null,durationSec:b.durationSec??null,position:b.position??0}).returning();return NextResponse.json(row[0]);}
